# easy-redux-http-call

> Created to make http call easy

[![NPM](https://img.shields.io/npm/v/easy-redux-http-call.svg)](https://www.npmjs.com/package/easy-redux-http-call) [![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

## Install

```bash
npm install --save easy-redux-http-call
```

or

```bash
yarn add easy-redux-http-call
```

## Usage

### Create Base

This class is use to create base instance for making HTTP calls. this will help to prevent reconfiguration everytime for each HTTP Request.
Create base will return your 2 method. this method uses default configuration from the createBase class. you can override this configuration at any time you want.

- createInstance: createInstance use to create simple instance to make HTTP call.
- createListInstance: createListInstance use to create listing instance to make HTTP call with 2 methods( updateAction, deleteAction)

```bash
const main = new CreateBase({
  store: store,
  baseApiUrl: https://dummy.restapiexample.com/api/v1,
  defaultState: {
    loading: true,
  },
  httpFn: (data) =>  window.fetch[data.method](data.endpoint, data.params).then(
      (res) => res.data
    ),
  reducer: "myReducerName",
  middleware: "myOwnMiddleware"
});
```

- Store: Your Store
- baseApiUrl: 'https://some-domain.com/api/'
  `baseURL` will be prepended to `url` unless `url` is absolute.
- defaultState: Default state for every HTTP Reqeust.
- httpFn: Your HTTP Requst fucntion. it can be window.fetch, axios or anything else. but it must returns promise which returns data.
- reducer: Your reducer where you want to store result of HTTP Request. This can change reducer at any time.
- middleware: middleware is used to execute code on different state of HTTP Request. This will help you to implement paggination for your project.

### Create API Instance

This class is used to create instance for making HTTP request. you have to configure this from scratch as you have not used Create Base class.

```bash
export const AI_updateTourConfig = main.createInstance({
  endpoint: "/user",
  method: "get",
  reducer: "user",
  reduxKey: "userDetail",
  action: "GET_USER_DETAIL",
  onSuccess: (data) => data,
});
```

- endpoint: Your API Endpoint
- method: HTTP Method (GET, POST, PUT, DELETE)
- reducer: Your Reducer name in which you want to store result
- reduxKey: Redux which in which you want to store result
- action: static action name used to easily identification to your actions
- onSucess: callback executed when HTTP call succeed

createInstance will generate new instance and store it into AI_updateTourConfig. This instance has method "call" which makes the actual HTTP request.

### Create Listing Instance

createListInstance use to create listing instance to make HTTP call with 2 methods(updateAction, deleteAction). This 2 method will help you to perform update and delete of records from the redux. this functions can be directly call from Socket.

```bash
export const AI_BranchUserList = main.createListInstance({
  endpoint: GET_BRANCH_USER_LIST_ENDPOINT,
  method: "get",
  id: "product_id",
  reducer: "product",
  reduxKey: "productList",
  action: "GET_PRODUCT_LIST",
  onSuccess: (data) => data,
  middleware: myMiddleWare,
});
```

Auto generated method will automatically update or remove records from given information at configuration time.

## Middleware

Middleware in create instance is used to perform option on different state of the execution. All the callback of middleware are as bellow

- beforeStart
- afterSuccess
- afterUpdate
- afterDelete

## Bind Reducer

Used to bind all the dynamic action to specified reducer. This will allow easy-reduc-http-call to handle state update for different situation.

```
const newUserReducer = bindReducer(configReducer, { key: "userReducer" });
```

Above code will be result as new reducer from the give reducer called newUserReducer. which can be used in combineRedux or directly used to create store.

## useInstance

use useInstance hook which help you get easily fetch state of current HTTP request. you don't have to make any configuation.

```
const reduxState = useInstance(httpInstance);
```

reduxState contain value of given(httpInstance) instance state from the redux.

## License

MIT Â© [prafuliihglobal](https://github.com/prafuliihglobal)
